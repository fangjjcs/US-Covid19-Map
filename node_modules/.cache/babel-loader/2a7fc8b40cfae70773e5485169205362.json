{"ast":null,"code":"var _jsxFileName = \"/Users/fang/Documents/React-Complete-Guide/us-covid19/src/App.js\";\nimport React, { Component } from 'react';\nimport Map from './Component/Map';\nimport InfoBox from './Component/InfoBox';\nimport LineChart from './Component/LineChart';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      beginString: 'Hi, this is a visualization map for showing COVID-19 confirmed cases in United States. Now you can click on the map to see trend chart for each states in the United States. This open data is provided by JHU CSSE.',\n      NowState: '',\n      response: '',\n      NowSeries: [],\n      showChart: false\n    };\n\n    this.callApi = async () => {\n      const response = await fetch('/api');\n      console.log(response);\n      const body = await response.json();\n      console.log(\"success\");\n      if (response.status !== 200) throw Error(body.message);\n      return body;\n    };\n\n    this.onClick = e => {\n      this.setState({\n        showChart: true\n      });\n      let Nowstate = e.target.getAttribute('data-name');\n      this.setState({\n        NowState: Nowstate\n      });\n\n      if (this.state.response.states.hasOwnProperty(String(Nowstate))) {\n        this.setState({\n          NowSeries: this.state.response.states[Nowstate]\n        });\n      } //console.log(this.state.response.states[Nowstate]);\n\n    };\n  }\n\n  componentDidMount() {\n    this.callApi().then(res => this.setState({\n      response: res\n    })) //\n    .catch(err => console.log(err));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Map, {\n      onHover: this.onClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"InfoBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InfoBox, {\n      nowState: this.state.NowState,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }), this.state.showChart ? null : /*#__PURE__*/React.createElement(\"p\", {\n      className: \"floating\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, this.state.beginString), this.state.showChart ? /*#__PURE__*/React.createElement(LineChart, {\n      series: this.state.NowSeries,\n      date: this.state.response.date,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }) : null));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/fang/Documents/React-Complete-Guide/us-covid19/src/App.js"],"names":["React","Component","Map","InfoBox","LineChart","App","state","beginString","NowState","response","NowSeries","showChart","callApi","fetch","console","log","body","json","status","Error","message","onClick","e","setState","Nowstate","target","getAttribute","states","hasOwnProperty","String","componentDidMount","then","res","catch","err","render","date"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport Map from './Component/Map';\nimport InfoBox from './Component/InfoBox';\nimport LineChart from './Component/LineChart';\nimport './App.css';\n\n\nclass App extends Component {\n\n  state = {\n    beginString:'Hi, this is a visualization map for showing COVID-19 confirmed cases in United States. Now you can click on the map to see trend chart for each states in the United States. This open data is provided by JHU CSSE.',\n    NowState:'',\n    response:'',\n    NowSeries:[],\n    showChart: false\n  }\n\n\n     \n  \n  componentDidMount(){\n    \n    this.callApi()\n      .then(res => this.setState({ response: res })) //\n      .catch(err => console.log(err));\n  }\n  callApi = async () => {\n    const response = await fetch('/api'); \n    console.log(response);\n    const body = await response.json();\n    console.log(\"success\");\n    if (response.status !== 200) throw Error(body.message);\n    \n    return body;\n  };\n \n  onClick=(e)=>{\n    this.setState({showChart:true});\n    let Nowstate = e.target.getAttribute('data-name');\n    this.setState({NowState:Nowstate});\n\n    if(this.state.response.states.hasOwnProperty(String(Nowstate))){\n       this.setState({NowSeries:this.state.response.states[Nowstate]});\n     }\n      \n    //console.log(this.state.response.states[Nowstate]);\n  }\n\n  render() {\n\n    return(\n      <div className=\"App\">\n        <Map onHover={this.onClick}/>\n        <div className=\"InfoBox\">\n          <InfoBox nowState={this.state.NowState}/>\n          {this.state.showChart? null:\n          <p className=\"floating\">{this.state.beginString}</p>\n          }\n          {this.state.showChart?\n          <LineChart series={this.state.NowSeries} date={this.state.response.date}/>: null\n          }\n          \n        </div>\n      </div>\n    );\n  }\n}\n\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}